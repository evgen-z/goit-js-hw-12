{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const searchPixabay = (searchQuery, currentPage) => {\n  const searchParams = new URLSearchParams({\n    key: '529440-adfab00ac2bbbc69c0a669d95',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: '15',\n  });\n\n  return axios.get(`https://pixabay.com/api/?${searchParams}`);\n};\n","export function renderGallery(images) {\n  return images\n    .map(\n      img => `\n        <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n        <div class=\"gallery-under\">\n\t\t<img \n\t\t\tclass=\"gallery-image\" \n\t\t\tsrc=\"${img.webformatURL}\" \n\t\t\talt=\"${img.tags}\" \n\t\t\t/>\n            <ul class=\"gallery-info\">\n        <li class=\"gallery-info-item\">\n          <h3>Likes</h3>\n          <p>${img.likes}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <h3>Views</h3>\n          <p>${img.views}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <h3>Comments</h3>\n          <p>${img.comments}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <h3>Downloads</h3>\n          <p>${img.downloads}</p>\n        </li>\n      </ul></div>\n\t</a>\n      `\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchPixabay } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-button');\n\nlet lightbox;\nlet currentPage = 1;\nlet searchQuery = '';\n\nloader.style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nconst searchSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchQuery = event.currentTarget.elements.query.value.trim();\n\n    gallery.innerHTML = '';\n\n    currentPage = 1;\n\n    if (searchQuery === '') {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Search field cannot be empty!',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        titleColor: '#FAFAFB',\n        iconColor: '#FAFAFB',\n      });\n      return;\n    }\n    loader.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n    const { data } = await searchPixabay(searchQuery, currentPage);\n\n    if (data.total === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        iconColor: '#FAFAFB',\n      });\n\n      gallery.innerHTML = '';\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'none';\n      searchForm.reset();\n\n      return;\n    }\n\n    if (data.totalHits > 15) {\n      loadMoreBtn.style.display = 'block';\n    loadMoreBtn.addEventListener('click', loadMoreClick);\n    }\n\n    gallery.innerHTML = renderGallery(data.hits);\n    \n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery a');\n    } else {\n      lightbox.refresh();\n    }\n    loader.style.display = 'none';\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nsearchForm.addEventListener('submit', searchSubmit);\n\nconst loadMoreClick = async () => {\n  \n  try {\n    currentPage++;\n\n    const { data } = await searchPixabay(searchQuery, currentPage);\n\n    \n\n    gallery.insertAdjacentHTML('beforeend', renderGallery(data.hits));\n    lightbox.refresh();\n    scroll();\n    if (currentPage * 15 >= data.totalHits) {\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        iconColor: '#FAFAFB',\n      });\n\n      loadMoreBtn.style.display = 'none';\n\n      loadMoreBtn.removeEventListener('click', loadMoreClick);\n\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n\n\nconst scroll = () => {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n"],"names":["searchPixabay","searchQuery","currentPage","searchParams","axios","renderGallery","images","img","searchForm","gallery","loader","loadMoreBtn","lightbox","searchSubmit","event","iziToast","data","loadMoreClick","SimpleLightbox","err","scroll","cardHeight"],"mappings":"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"}